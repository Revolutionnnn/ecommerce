(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{3409:(e,t,a)=>{Promise.resolve().then(a.bind(a,2234))},2234:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(5155),l=a(6046),c=a(3391),s=a(2115),n=a(5236),i=a(6074),o=a(7803),d=a(9360),u=a(7684),m=a(891),x=a(4440);async function f(e){try{let t=await fetch("".concat(x.A.baseUrl,"/products/").concat(e));if(!t.ok)throw Error("Error fetching product: ".concat(t.statusText));return await t.json()}catch(e){return null}}function h(e){var t;let{params:a}=e,x=(0,l.useRouter)(),h=(0,c.wA)(),p=(0,c.d4)(e=>e.cart.items),[g,y]=(0,s.useState)(null),[N,b]=(0,s.useState)(!0),[v,j]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{try{let e=await a;j(e.reference)}catch(e){console.error("Error resolving params:",e)}})()},[a]),(0,s.useEffect)(()=>{v&&(async()=>{try{b(!0);let e=await f(v);y(e)}catch(e){console.error("Error fetching product:",e)}finally{b(!1)}})()},[v]),N)return(0,r.jsx)("div",{className:"text-center text-xl font-bold",children:"Cargando..."});if(!g)return(0,r.jsx)("div",{className:"text-center text-xl font-bold",children:"Producto no encontrado"});let S=(null===(t=p.find(e=>e.id===g.reference))||void 0===t?void 0:t.quantity)||0,w=e=>{if(S+e>g.cantidadStock){alert("No puedes agregar m\xe1s de ".concat(g.cantidadStock," unidades al carrito. Ya tienes ").concat(S," en el carrito."));return}h((0,m.bE)({id:g.id,title:g.titulo,price:g.basePrice,quantity:e,image:g.imagenUrl}))};return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6 py-10 px-4",children:[(0,r.jsxs)(i.Z,{className:"w-full max-w-lg shadow-lg",children:[(0,r.jsxs)(o.U,{className:"flex flex-col items-center",children:[(0,r.jsx)(d.W,{alt:g.titulo,className:"rounded-lg",height:200,src:g.imagenUrl||void 0,width:300}),(0,r.jsx)("h1",{className:"text-3xl font-bold mt-4",children:g.titulo}),(0,r.jsx)("p",{className:"text-gray-500 mt-2 text-center",children:g.description}),(0,r.jsxs)("p",{className:"text-2xl font-semibold mt-4 text-primary",children:["$",g.basePrice]}),(0,r.jsx)("p",{className:"text-lg mt-2 ".concat(g.cantidadStock>10?"text-green-600":"text-red-600"," font-medium"),children:g.cantidadStock>0?"\xa1Quedan ".concat(g.cantidadStock," en stock!"):"No disponible"})]}),(0,r.jsx)(u.Z,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"quantity",children:"Cantidad:"}),(0,r.jsx)("input",{className:"border rounded-lg px-2 py-1 w-16 text-center",defaultValue:"1",disabled:0===g.cantidadStock,id:"quantity",max:g.cantidadStock,min:"1",type:"number"})]}),(0,r.jsx)(n.T,{className:"w-full",color:"primary",disabled:0===g.cantidadStock,variant:"shadow",onPress:()=>{let e=parseInt(document.getElementById("quantity").value);e>0&&w(e)},children:"A\xf1adir al Carrito"}),(0,r.jsx)(n.T,{className:"w-full",color:"success",disabled:0===g.cantidadStock,variant:"flat",onPress:()=>x.push("/summary"),children:"Comprar Ahora"})]})})]}),(0,r.jsx)(n.T,{onPress:()=>x.back(),children:"Volver"})]})}},4440:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r={baseUrl:a(2818).env.NEXT_PUBLIC_API_URL||"http://localhost:3000"}},891:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>d,bE:()=>n,dt:()=>i,sX:()=>o});var r=a(8943);let l=e=>{try{let t=JSON.stringify(e);localStorage.setItem("cart",t)}catch(e){console.error("Error guardando el estado del carrito en localStorage:",e)}},c=(()=>{try{let e=localStorage.getItem("cart");if(null===e)return{items:[]};return JSON.parse(e)}catch(e){return console.error("Error cargando el estado del carrito desde localStorage:",e),{items:[]}}})(),s=(0,r.Z0)({name:"cart",initialState:c,reducers:{addToCart:(e,t)=>{let a=e.items.find(e=>e.id===t.payload.id);a?a.quantity+=t.payload.quantity:e.items.push(t.payload),l(e)},removeFromCart:(e,t)=>{e.items=e.items.filter(e=>e.id!==t.payload),l(e)},clearCart:e=>{e.items=[],l(e)}}}),{addToCart:n,removeFromCart:i,clearCart:o}=s.actions,d=s.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[1,505,236,980,441,517,358],()=>t(3409)),_N_E=e.O()}]);